# XLeRobot智能语音机器人 - 项目概览

## 项目基本信息

**项目名称:** XLeRobot智能语音机器人系统  
**项目类型:** Software - 机器人控制系统  
**项目级别:** Level 4 - 企业级系统  
**开发语言:** Python 3.10.12  
**核心框架:** ROS2 Humble  
**项目状态:** Brownfield 重构项目  
**文档版本:** v1.0  
**生成时间:** 2025-11-07  

---

## 📋 项目概述

XLeRobot是一个基于ROS2的智能语音机器人系统，专门设计用于粤语语音交互。该项目集成了先进的语音识别(ASR)、自然语言处理(NLP)和语音合成(TTS)技术，配合RDK X5 NPU硬件加速，提供低延迟、高精度的智能对话体验。

### 核心特性

- 🎤 **粤语语音识别**: 基于SenseVoiceSmall的高精度粤语ASR系统
- 🧠 **智能对话**: 集成通义千问大语言模型，支持自然对话
- 🔊 **语音合成**: Piper VITS粤语TTS，清晰自然的语音输出
- 🚀 **硬件加速**: RDK X5 NPU/BPU加速，提升推理性能
- 🤖 **机器人控制**: 完整的机器人运动控制和环境感知
- 📹 **视觉系统**: IMX219摄像头视觉处理能力
- 🏠 **智能家居**: 集成智能家居控制功能

---

## 🎯 项目目标

### 主要目标
1. **智能语音交互**: 实现流畅的粤语人机对话体验
2. **硬件加速优化**: 利用RDK X5 NPU实现3-5倍性能提升
3. **机器人自主导航**: 完整的SLAM和路径规划能力
4. **智能家居集成**: 控制家居设备，提供智能生活助手功能

### 技术目标
- ASR响应时间: <2秒 (CPU) / <0.5秒 (NPU)
- TTS合成时间: <1秒 (CPU) / <0.3秒 (NPU)
- 完整交互延迟: <5秒 (CPU) / <2秒 (NPU)
- 粤语识别准确率: >85%
- 系统稳定性: 连续运行>24小时无崩溃

---

## 🏗️ 项目架构

### 系统层级架构
```
XLeRobot系统架构:
├── 感知层 (Perception Layer)
│   ├── 语音感知: ASR + 麦克风阵列
│   ├── 视觉感知: IMX219摄像头 + 图像处理
│   └── 环境感知: 传感器数据融合
├── 认知层 (Cognitive Layer)  
│   ├── 自然语言理解: 通义千问LLM
│   ├── 对话管理: 上下文理解与状态跟踪
│   └── 决策规划: 行为规划与决策
├── 执行层 (Execution Layer)
│   ├── 语音输出: TTS + 扬声器系统
│   ├── 运动控制: 机器人导航与控制
│   └── 设备控制: 智能家居设备接口
└── 基础设施层 (Infrastructure Layer)
    ├── ROS2通信框架
    ├── NPU/BPU硬件加速
    └── 系统监控与容灾
```

### 核心模块组成
- **ASR模块**: SenseVoiceSmall + FunASR + NPU加速
- **LLM模块**: 通义千问API + 对话管理
- **TTS模块**: Piper VITS + 智能音频播放
- **机器人控制**: 运动规划 + SLAM导航
- **系统集成**: ROS2节点 + 消息通信

---

## 🔧 技术栈详情

### 核心技术栈
| 技术领域 | 技术选型 | 版本 | 用途 |
|---------|---------|------|------|
| **操作系统** | Ubuntu | 22.04 LTS | 基础运行环境 |
| **机器人框架** | ROS2 | Humble | 机器人通信框架 |
| **编程语言** | Python | 3.10.12 | 主要开发语言 |
| **ASR引擎** | SenseVoiceSmall | FunASR | 粤语语音识别 |
| **LLM引擎** | 通义千问 | qwen3-vl-plus | 智能对话 |
| **TTS引擎** | Piper VITS | latest | 粤语语音合成 |
| **硬件加速** | RDK X5 | 10 TOPS | NPU/BPU加速 |
| **音频处理** | PyAudio | 0.2.11 | 音频输入输出 |
| **视觉处理** | OpenCV | 4.x | 图像处理 |

### 依赖管理
- **Python环境**: miniconda3 + 虚拟环境管理
- **包管理**: pip + conda
- **模型管理**: ModelScope + HuggingFace
- **容器化**: Docker (可选部署)

---

## 📁 项目结构

### 目录结构概览
```
xlerobot/
├── src/                          # 源代码目录
│   ├── modules/                  # 核心功能模块
│   │   ├── asr/                 # 语音识别模块
│   │   ├── llm/                 # 大语言模型模块
│   │   ├── tts/                 # 语音合成模块
│   │   ├── system_control/      # 系统控制模块
│   │   └── smart_home/          # 智能家居模块
│   ├── xlerobot_llm/            # ROS2功能包
│   ├── integration/             # 集成测试
│   └── optimization/            # 性能优化
├── docs/                         # 项目文档
├── tests/                        # 测试文件
├── bmad/                         # BMAD工作流框架
├── archive/                      # 历史文件归档
├── MODELS/                       # AI模型文件
│   └── asr/                     # ASR模型存储
└── xlerobot-project-reconstruction-sop.md  # 重构SOP
```

### 核心文件说明
- **src/modules/asr/asr_core.py**: ASR核心引擎实现
- **src/modules/llm/qwen_client.py**: 通义千问API客户端
- **src/modules/tts/audio_player.py**: 智能音频播放器
- **src/integration/voice_assistant.py**: 语音助手集成
- **setup_correct_env.sh**: 环境配置脚本

---

## 🚀 当前状态

### 已完成功能 ✅
1. **ASR语音识别基础架构**
   - SenseVoiceSmall模型集成
   - hobot_dnn NPU加速支持
   - 唤醒词检测系统
   - 音频播放器集成

2. **LLM智能对话系统**
   - 通义千问API集成
   - 对话上下文管理
   - ROS2消息通信
   - 异步处理支持

3. **TTS语音合成系统**
   - Piper VITS模型集成
   - 粤语语音合成
   - 音频格式自动检测
   - 播放器控制

4. **系统集成框架**
   - ROS2节点架构
   - 模块间通信
   - 错误处理机制
   - 日志系统

### 需要优化功能 ⚠️
1. **ASR模型优化**
   - 模型文件格式验证
   - NPU转换优化
   - 识别准确性提升

2. **LLM连接稳定性**
   - API重连机制
   - 网络异常处理
   - 响应时间优化

3. **系统集成测试**
   - 端到端功能验证
   - 性能基准测试
   - 长期稳定性验证

### 待开发功能 🚧
1. **视觉感知模块**
   - 摄像头集成
   - 图像识别处理
   - 视觉导航

2. **运动控制系统**
   - SLAM导航
   - 路径规划
   - 避障算法

3. **智能家居集成**
   - 设备控制协议
   - 场景自动化
   - 远程控制

---

## 🎯 用户场景

### 主要应用场景
1. **家庭助手**: 日常对话、信息查询、提醒服务
2. **智能家居**: 语音控制家电、环境监测、安防监控
3. **陪伴机器人**: 老人陪护、儿童教育、情感交流
4. **商业应用**: 客服机器人、导览服务、信息查询

### 典型使用流程
1. **唤醒**: 用户说"傻强"唤醒机器人
2. **识别**: ASR系统识别用户语音指令
3. **理解**: LLM理解用户意图并生成回复
4. **合成**: TTS系统生成粤语语音回复
5. **执行**: 机器人执行相应动作或控制指令

---

## 📊 性能指标

### 关键性能指标
| 指标类型 | 目标值 | 当前状态 | 备注 |
|---------|--------|----------|------|
| **ASR响应时间** | <2秒 | 基础实现 | 需NPU优化 |
| **TTS合成时间** | <1秒 | 正常工作 | 可NPU加速 |
| **LLM响应时间** | <3秒 | API集成完成 | 网络依赖 |
| **粤语识别准确率** | >85% | 模型就绪 | 需训练优化 |
| **系统稳定性** | >24小时 | 测试阶段 | 需长期验证 |
| **NPU加速比** | 3-5倍 | 架构支持 | 待实施 |

### 质量指标
- **代码覆盖率**: >80%
- **文档完整性**: >90%
- **API可用性**: >99%
- **错误恢复时间**: <30秒

---

## 🔮 发展规划

### 短期目标 (1-3个月)
1. 完成NPU/BPU加速实施
2. 优化ASR识别准确性
3. 完善系统集成测试
4. 建立完整的监控体系

### 中期目标 (3-6个月)
1. 实现视觉感知模块
2. 开发运动控制系统
3. 集成智能家居功能
4. 优化用户体验

### 长期目标 (6-12个月)
1. 多模态交互能力
2. 自主学习算法
3. 云端协同计算
4. 商业化部署准备

---

## 📞 项目信息

### 开发团队
- **项目负责人**: Jody (sunrise)
- **技术架构**: BMAD工作流框架
- **开发模式**: 敏捷开发 + 持续集成

### 相关文档
- **重构SOP**: `xlerobot-project-reconstruction-sop.md`
- **BMAD工作流**: `bmad/bmm/workflows/`
- **技术文档**: `docs/project-docs/`
- **API文档**: `docs/api-docs/`

### 联系方式
- **项目路径**: `/home/sunrise/xlerobot`
- **文档路径**: `/home/sunrise/xlerobot/docs/project-docs/`
- **工作目录**: `/home/sunrise/xlerobot`

---

**文档更新**: 2025-11-07  
**下次审查**: 2025-12-07  
**文档维护**: 项目团队